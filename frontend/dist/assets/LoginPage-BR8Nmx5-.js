import{u as U,r as o,a as L,j as e,q as j,k as b}from"./index-BKVowuDS.js";const T=()=>{const{signInGoogle:y,continueAsGuest:N,signUpWithEmail:P,signInWithEmail:S}=U(),[l,g]=o.useState("login"),[m,C]=o.useState(""),[p,G]=o.useState(""),[d,E]=o.useState(""),[u,k]=o.useState(!1),[w,r]=o.useState(""),[f,v]=o.useState(!1),h=L(),I=async s=>{s.preventDefault(),r(""),v(!0);const c=p.trim(),x=t=>{if(!t)return"that provider";const i=t.split(".")[0]||"";return i.toLowerCase()==="google"?"Google":i.charAt(0).toUpperCase()+i.slice(1)};try{l==="signup"?await P(m,c,d):await S(c,d),h("/")}catch(t){const i=t==null?void 0:t.code;let a;if(i==="auth/user-not-found")a="No account found with this email. Please sign up first.";else if(i==="auth/wrong-password")try{const n=await j(b,c);n.length===0?a="No account found with this email. Please sign up first.":n.includes("password")?a="Incorrect password. Please try again.":a=`This account was created with ${x(n[0])}. Please sign in using that method.`}catch{a="Incorrect password. Please try again."}else if(i==="auth/invalid-credential"||i==="auth/invalid-login-credentials")try{const n=await j(b,c);n.length===0?a="No account found with this email. Please sign up first.":n.includes("password")?a="Incorrect password. Please try again.":a=`This account was created with ${x(n[0])}. Please sign in using that method.`}catch{a="Invalid email or password."}else i==="auth/invalid-email"?a="Please enter a valid email address.":a=(t==null?void 0:t.message)||"Authentication failed";r(a)}finally{v(!1)}},A=async()=>{try{await y(),h("/")}catch(s){r((s==null?void 0:s.message)||"Google sign-in failed")}},q=async()=>{try{await N(),h("/")}catch(s){r((s==null?void 0:s.message)||"Guest sign-in failed")}};return e.jsx("div",{className:"login-container",children:e.jsxs("div",{className:"card login-card",children:[e.jsx("h1",{children:l==="signup"?"Create account":"Sign in"}),e.jsx("p",{className:"muted",children:"Use email/password or jump in with Google or Guest."}),e.jsxs("div",{className:"auth-buttons",children:[e.jsx("button",{className:"btn guest-btn",onClick:q,children:"Continue as Guest"}),e.jsx("button",{className:"btn btn-secondary",onClick:A,children:"Sign in with Google"})]}),e.jsx("div",{className:"divider",children:"or with email"}),e.jsxs("form",{className:"login-form",onSubmit:I,children:[l==="signup"&&e.jsxs("label",{children:["Name",e.jsx("input",{type:"text",value:m,onChange:s=>C(s.target.value),required:!0})]}),e.jsxs("label",{children:["Email",e.jsx("input",{type:"email",value:p,onChange:s=>G(s.target.value),required:!0})]}),e.jsxs("label",{children:["Password",e.jsxs("div",{className:"input-with-icon",children:[e.jsx("input",{type:u?"text":"password",value:d,onChange:s=>E(s.target.value),required:!0}),e.jsx("button",{type:"button",className:"icon-btn",onClick:()=>k(s=>!s),"aria-label":u?"Hide password":"Show password",children:e.jsx("img",{src:`/${u?"eye.svg":"eye-off.svg"}`,alt:"",className:"eye-icon"})})]})]}),w&&e.jsx("div",{className:"error-message",children:w}),e.jsx("button",{className:"btn btn-primary",type:"submit",disabled:f,children:f?"Please wait...":l==="signup"?"Create account":"Sign in"})]}),e.jsx("div",{className:"toggle-mode",children:l==="signup"?e.jsxs("span",{children:["Already have an account? ",e.jsx("button",{className:"link-btn",onClick:()=>g("login"),children:"Sign in"})]}):e.jsxs("span",{children:["No account? ",e.jsx("button",{className:"link-btn",onClick:()=>g("signup"),children:"Create one"})]})})]})})};export{T as default};
